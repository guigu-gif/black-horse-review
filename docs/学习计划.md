# 黑马点评学习计划

## 📊 整体进度
- [x] 环境搭建
- [x] 基础缓存
- [x] 缓存穿透
- [x] 缓存击穿
- [x] 缓存雪崩
- [x] 逻辑过期方案（理论理解完成，暂时搁置）
- [ ] **阶段0：补基础工具知识**（新增！进行中）
- [ ] 优惠券秒杀（暂停，完成阶段0后继续）
- [x] 点赞功能
- [x] 好友关注
- [x] 附近商户（2026-02-26完成）
- [x] 用户签到（2026-02-26完成）

---

## 🎯 当前阶段：阶段0 - 补基础工具知识

### 📌 为什么要补这个？
**发现的问题：**
- 不理解项目结构（src、pom.xml、target是什么？）
- 不会调试代码（只能看，无法验证理解）
- 看不懂报错信息（编译错误 vs 运行错误？）
- 不知道依赖从哪来（Maven是什么？jar包从哪下载的？）
- Java基础薄弱（Lambda、泛型、注解不理解）

**本质原因：**
学校只教了"砖头"（语法），没教"怎么建房子"（项目开发）

### ✅ 学习目标（预计1-2天）
1. **理解Java Web项目结构**
   - 源文件在哪？（src/main/java）
   - 配置文件在哪？（src/main/resources）
   - 编译后的文件在哪？（target/classes）
   - 依赖管理：pom.xml的作用

2. **掌握IDEA调试技能**
   - 打断点（左键点击行号）
   - 单步执行（F8 - Step Over）
   - 进入方法（F7 - Step Into）
   - 查看变量值（Variables窗口）
   - 执行到光标处（Alt+F9）

3. **理解Spring Boot项目启动流程**
   - main方法在哪？（HmDianPingApplication.java）
   - 启动后发生了什么？（Spring容器初始化）
   - Controller怎么被调用的？（请求流程）
   - @Autowired是怎么注入的？（依赖注入）

4. **学会看报错信息**
   - 编译错误（红色波浪线）：语法问题
   - 运行错误（Exception）：逻辑问题
   - 堆栈信息怎么看？（从下往上看调用链）

5. **补充必要的Java基础**
   - Lambda表达式：`() -> {}`
   - 泛型：`List<String>`
   - 注解：`@Override`、`@Autowired`
   - Stream API：`.map()`、`.filter()`
   - 线程池：`ExecutorService`（黑马用到了）

### 📝 学习方式
**边学边练，不系统学习**
- 用黑马项目练手
- 遇到不懂的就查（按需学习）
- 在VoucherOrderController里打断点
- 发起秒杀请求，单步调试看流程

### 🎯 阶段0完成标准
- [ ] 能看懂项目目录结构，知道每个文件夹的作用
- [x] 能用断点调试代码，单步执行看流程（2026-02-18完成）
- [x] 能看懂报错信息，知道是什么类型的错误（2026-02-18完成）
- [x] 理解黑马项目的启动流程（main → Spring Boot → Controller）
- [ ] 能看懂黑马代码里的Lambda、泛型、注解
- [x] 会用F12看网络请求和响应（2026-02-18完成）
- [ ] 会看Stack Trace堆栈信息，定位报错代码行

---

## 🎯 优惠券秒杀模块（阶段0完成后继续）

### 已完成
1. **理解秒杀业务场景**
   - 商家发布限量优惠券
   - 用户抢购
   - 三个核心问题：超卖、一人一单、性能

2. **深入理解秒杀代码（VoucherOrderServiceImpl.java）**
   - ✅ 检查阶段（第38-55行）
     - 查询优惠券信息
     - 判断秒杀时间（开始、结束）
     - 快速库存检查

   - ✅ 核心逻辑：一人一单（第58-70行）
     - synchronized锁的作用和原理
     - `.intern()` 字符串常量池的作用
     - 锁对象的选择（为什么用userId.toString().intern()）
     - 查询用户是否已购买

   - ✅ 核心逻辑：乐观锁防超卖（第73-81行）
     - `.gt("stock", 0)` 是UPDATE的WHERE条件
     - 数据库行锁机制（原子性保证）
     - 为什么能防超卖（场景模拟）
     - 快速检查 vs 乐观锁的区别

   - ⏳ 创建订单部分（第84-98行）- 理解了原理，代码细节待学习
     - 理解了为什么需要全局唯一ID（数据库自增的缺陷）
     - 理解了RedisIdWorker原理（时间戳+序列号）
     - 理解了Redis单线程模型如何保证唯一性

3. **掌握关键知识点**
   - 方法调用链（链式调用）的执行原理
   - synchronized锁的使用（防一人多单）
   - 乐观锁的原理（防超卖核心）
   - MyBatis-Plus的链式操作
   - Java 8日期时间API（LocalDateTime）
   - RedisIdWorker原理（时间戳+序列号，Redis单线程+INCR原子操作）

### 下一步（继续秒杀模块）
1. **完成RedisIdWorker学习**（下次）
   - 用自己的话阐述原理（费曼学习法）
   - 理解代码实现（位运算：左移、或运算）
   - 整体回顾秒杀流程

2. **实践验证**（阶段0目标）
   - 用IDEA调试秒杀代码
   - 在关键位置打断点
   - 单步执行，查看变量值
   - 验证对代码的理解

3. **分布式锁（后续学习）**
   - 理解单机synchronized的问题
   - 用Redis实现分布式锁（SETNX）
   - 解决分布式环境下的一人一单问题

4. **异步秒杀优化（高级）**
   - 理解性能瓶颈
   - 用Lua脚本 + 消息队列优化
   - 实现高性能秒杀

## 📝 学习方法
- 目的导向：先理解问题（为什么会出现这个技术？）
- 整体框架：先理解整体架构
- 底层原理：理解底层实现机制
- 费曼学习：用自己的话阐述
- 代码实践：看懂 → 照着写 → 修改参数
- 间歇复习：1天、3天、7天

## ⚠️ 当前发现的问题

### 工具和环境层面
- ❌ 不理解项目结构和构建流程
- ❌ 不会用IDEA调试
- ❌ 不理解Maven依赖管理
- ❌ 看不懂报错信息

### Java基础层面
- ⚠️ Lambda表达式不熟悉
- ⚠️ 泛型不理解
- ⚠️ 注解不理解原理
- ⚠️ 线程池概念模糊

### 项目理解层面
- ⚠️ 不理解Spring Boot启动流程
- ⚠️ 不理解依赖注入（@Autowired）
- ⚠️ 不理解Controller怎么被调用

### 学习方法层面
- 代码实践能力弱（需要加强）
- 学习效率低但理解深刻（需要平衡）
- 看代码会头疼（需要循序渐进，不要一次性学太多）

---

## 💡 学习心得
- 超卖问题的本质是并发问题
- 数据库的行锁是同步机制，不是异步
- 一条SQL语句的执行是原子操作
- 学习要"先建一楼，再建二楼"
- 理解底层原理比记住代码更重要
- **看懂 ≠ 学会，必须通过调试和实践才能真正掌握**

## 🎨 其他项目
- **小说创作**：已完成魔法体系设定（docs/格外小说/魔法体系设定.md）

---

**更新时间：** 2026-02-16

